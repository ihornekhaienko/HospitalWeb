function increment(){try{let n=document.getElementById("notifications-count"),t=n.textContent;t?n.textContent=+t+1:n.appendChild(document.createTextNode("1"))}catch(n){console.log(n.message)}}function decrement(){try{let n=document.getElementById("notifications-count"),t=n.textContent;n.textContent=+t==1?null:+t-1}catch(n){console.log(n.message)}}function removeNotification(n){try{let t=document.getElementById("notifications"),i=t.firstChild;i&&(t.removeChild(i),decrement());n.stopPropagation();n.preventDefault()}catch(t){console.log(t.message)}}function updatePopover(){try{const n=[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));n.map(n=>{let t={animation:!1};n.hasAttribute("data-bs-content-id")&&(t.content=document.getElementById(n.getAttribute("data-bs-content-id")).innerHTML,t.html=!0);new bootstrap.Popover(n,t)})}catch(n){console.log(n.message)}}function createNotificationDiv(n,t,i="alert-info"){let r=document.createElement("div");r.classList.add("alert");r.classList.add(i);r.classList.add("p-1");r.classList.add("mb-1");let u=document.createElement("h6");u.classList.add("alert-heading");u.appendChild(document.createTextNode(n));r.appendChild(u);let f=document.createElement("p");return f.classList.add("m-0"),f.appendChild(document.createTextNode(t)),r.appendChild(f),r}function notifySignUp(n,t,i){try{hubConnection.invoke("NotifySignUp",n,t,i)}catch(r){console.log(r.message)}}function notifyCancel(n,t,i){try{hubConnection.invoke("NotifyCancel",n,t,i)}catch(r){console.log(r.message)}}function notifyFill(n,t,i){try{hubConnection.invoke("NotifyFill",n,t,i)}catch(r){console.log(r.message)}}function confirmSignUp(n){return confirm(n)}function updateAppoitmentsStates(){$.ajax({url:"https://localhost:7271/jobs/updateStates",type:"POST",crossDomain:!0,headers:{accept:"application/json","Access-Control-Allow-Origin":"*"},success:function(){console.log("states update")},error:function(){console.log("states update failed")}})}const hubConnection=(new signalR.HubConnectionBuilder).withUrl("/NotificationHub").build();hubConnection.on("NotifySignUp",function(n,t){try{document.getElementById("notifications").appendChild(createNotificationDiv(n,t,"alert-primary"));let i=document.getElementById("notifications-profile");if(i){let r=document.createElement("div");r.classList.add("row");r.appendChild(createNotificationDiv(n,t,"alert-primary"));i.appendChild(r)}increment();updatePopover()}catch(i){console.log(i.message)}});hubConnection.on("NotifyCancel",function(n,t){try{document.getElementById("notifications").appendChild(createNotificationDiv(n,t,"alert-danger"));let i=document.getElementById("notifications-profile");if(i){let r=document.createElement("div");r.classList.add("row");r.appendChild(createNotificationDiv(n,t,"alert-danger"));i.appendChild(r)}increment();updatePopover()}catch(i){console.log(i.message)}});hubConnection.on("NotifyFill",function(n,t){try{document.getElementById("notifications").appendChild(createNotificationDiv(n,t,"alert-success"));let i=document.getElementById("notifications-profile");if(i){let r=document.createElement("div");r.classList.add("row");r.appendChild(createNotificationDiv(n,t,"alert-success"));i.appendChild(r)}increment();updatePopover()}catch(i){console.log(i.message)}});hubConnection.start();updateAppoitmentsStates();